import{c as E,m as ue,d as K,p as he,n as Q,t as je,r as t,j as e,S as xe}from"./index-4LWUHDJo.js";import{l as be,d as pe,u as fe,a as Ne,b as ge}from"./scheduleService-ChXdVY-R.js";import{l as ve}from"./teacherService-2Pq2ufkF.js";import{g as we}from"./settingsService-yLoKs9nE.js";const U=(i,m)=>{const b=E(K,`${i}/`);return ue(b,o=>{const d=o.val(),h=d?Object.keys(d).map(n=>({id:n,...d[n]})):[];m(h.sort((n,v)=>n.name.localeCompare(v.name)))})},ke=(i,m)=>{if(!m||m.trim().length===0)return Promise.reject(new Error("Item name cannot be empty."));const b=E(K,`${i}/`),o=he(b);return Q(o,{name:m.trim()})},Se=(i,m)=>{const b=E(K,`classNames/${i}/subjects`),o=m.reduce((d,h)=>(d[h]=!0,d),{});return Q(b,o)},ye=(i,m)=>{const b=E(K,`${i}/${m}`);return je(b)},Ce=["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],Me=({isOpen:i,onClose:m,message:b})=>i?e.jsxs("dialog",{id:"error_modal",className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Terjadi Kesalahan"]}),e.jsx("p",{className:"py-4",children:b}),e.jsx("div",{className:"modal-action",children:e.jsx("button",{className:"btn btn-primary",onClick:m,children:"Tutup"})})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{onClick:m,children:"close"})})]}):null,Te=({isOpen:i,onClose:m,onSave:b,teachers:o,subjects:d,classNames:h,editingSchedule:n,preselectedClassId:v,jpDurationMinutes:j,activeDayNames:A})=>{const[r,f]=t.useState({teacherId:"",subjectId:"",classNameId:"",dayOfWeek:1,startTime:"07:30",jumlahJP:1}),[c,C]=t.useState(""),N=t.useMemo(()=>{if(!r.classNameId)return d;const s=h.find(x=>x.id===r.classNameId),l=s!=null&&s.subjects?Object.keys(s.subjects):[];return d.filter(x=>l.includes(x.id))},[r.classNameId,h,d]);t.useEffect(()=>{if(i)if(n){let s=n.jumlahJP;if(!s&&j>0){const l=new Date(`1970-01-01T${n.startTime}`),g=(new Date(`1970-01-01T${n.endTime}`).getTime()-l.getTime())/6e4;s=Math.round(g/j)}f({teacherId:n.teacherId,subjectId:n.subjectId,classNameId:n.classNameId,dayOfWeek:n.dayOfWeek,startTime:n.startTime,jumlahJP:s||1})}else{const s=v||(h.length>0?h[0].id:""),l=h.find(T=>T.id===s),x=l!=null&&l.subjects?Object.keys(l.subjects):[],g=d.filter(T=>x.includes(T.id));f({teacherId:o.length>0?o[0].id:"",subjectId:g.length>0?g[0].id:"",classNameId:s,dayOfWeek:1,startTime:"07:30",jumlahJP:1})}},[n,o,d,h,i,v,j]),t.useEffect(()=>{if(!i)return;N.some(l=>l.id===r.subjectId)||f(l=>({...l,subjectId:N.length>0?N[0].id:""}))},[r.classNameId,N,i,r.subjectId]),t.useEffect(()=>{if(!r.startTime||!r.jumlahJP||j<=0){C("");return}try{const s=r.jumlahJP*j,l=new Date(`1970-01-01T${r.startTime}`);l.setMinutes(l.getMinutes()+s);const x=String(l.getHours()).padStart(2,"0"),g=String(l.getMinutes()).padStart(2,"0");C(`${x}:${g}`)}catch{C("Invalid Time")}},[r.startTime,r.jumlahJP,j]);const O=s=>{if(s.preventDefault(),!c||c==="Invalid Time"){alert("Jam mulai tidak valid.");return}const l=o.find(w=>w.id===r.teacherId),x=d.find(w=>w.id===r.subjectId),g=h.find(w=>w.id===r.classNameId);if(!l||!x||!g){alert("Harap pastikan semua data (guru, mapel, kelas) telah dipilih dan valid.");return}const T={teacherId:l.id,teacherName:l.name,subjectId:x.id,subjectName:x.name,classNameId:g.id,className:g.name,dayOfWeek:Number(r.dayOfWeek),startTime:r.startTime,endTime:c,jumlahJP:Number(r.jumlahJP)};b(T)};return i?e.jsxs("dialog",{id:"schedule_modal",className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box w-screen h-screen max-w-full max-h-full rounded-none flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[e.jsx("h3",{className:"font-bold text-xl sm:text-2xl",children:n?"Edit Jadwal":"Tambah Jadwal Baru"}),e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost",onClick:m,children:"âœ•"})]}),e.jsx("form",{onSubmit:O,className:"space-y-4 overflow-y-auto flex-grow",children:e.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Kelas"})}),e.jsxs("select",{className:"select select-bordered",value:r.classNameId,onChange:s=>f(l=>({...l,classNameId:s.target.value})),required:!0,children:[h.length===0&&e.jsx("option",{disabled:!0,children:"Tidak ada data kelas"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Mata Pelajaran"})}),e.jsxs("select",{className:"select select-bordered",value:r.subjectId,onChange:s=>f(l=>({...l,subjectId:s.target.value})),required:!0,disabled:N.length===0,children:[N.length===0&&e.jsx("option",{disabled:!0,children:"Tidak ada mapel terdaftar untuk kelas ini"}),N.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-info",children:'Hanya mapel yang terdaftar di kelas ini yang muncul. Kelola di tab "Kelola Kelas".'})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Guru"})}),e.jsxs("select",{className:"select select-bordered",value:r.teacherId,onChange:s=>f(l=>({...l,teacherId:s.target.value})),required:!0,children:[o.length===0&&e.jsx("option",{disabled:!0,children:"Tidak ada guru aktif"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Hari"})}),e.jsx("select",{className:"select select-bordered",value:r.dayOfWeek,onChange:s=>f(l=>({...l,dayOfWeek:Number(s.target.value)})),children:A.map((s,l)=>e.jsx("option",{value:l+1,children:s},l))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Jam Mulai"})}),e.jsx("input",{type:"time",className:"input input-bordered",value:r.startTime,onChange:s=>f(l=>({...l,startTime:s.target.value})),required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Jumlah JP"})}),e.jsx("input",{type:"number",min:"1",className:"input input-bordered",value:r.jumlahJP,onChange:s=>f(l=>({...l,jumlahJP:Number(s.target.value)})),required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Perkiraan Jam Selesai"})}),e.jsx("input",{type:"time",className:"input input-bordered bg-base-200",value:c,readOnly:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:m,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:n?"Simpan Perubahan":"Tambah Jadwal"})]})]})})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{onClick:m,children:"close"})})]}):null},Ie=({isOpen:i,onClose:m,onSave:b,selectedClass:o,allSubjects:d})=>{const[h,n]=t.useState(new Set),[v,j]=t.useState("");t.useEffect(()=>{if(i&&o){const c=o.subjects?Object.keys(o.subjects):[];n(new Set(c)),j("")}},[i,o]);const A=c=>{n(C=>{const N=new Set(C);return N.has(c)?N.delete(c):N.add(c),N})},r=()=>{o&&b(o.id,Array.from(h))},f=t.useMemo(()=>v?d.filter(c=>c.name.toLowerCase().includes(v.toLowerCase())):d,[d,v]);return!i||!o?null:e.jsxs("dialog",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Kelola Mata Pelajaran untuk Kelas ",o.name]}),e.jsx("p",{className:"py-2",children:"Pilih mata pelajaran yang akan diajarkan di kelas ini."}),e.jsx("input",{type:"text",placeholder:"Cari mata pelajaran...",className:"input input-bordered w-full my-2",value:v,onChange:c=>j(c.target.value)}),e.jsxs("div",{className:"form-control max-h-60 overflow-y-auto mt-2 p-2 bg-base-200 rounded-lg",children:[f.map(c=>e.jsxs("label",{className:"label cursor-pointer hover:bg-base-100 rounded-md",children:[e.jsx("span",{className:"label-text",children:c.name}),e.jsx("input",{type:"checkbox",checked:h.has(c.id),onChange:()=>A(c.id),className:"checkbox checkbox-primary"})]},c.id)),d.length===0&&e.jsx("p",{className:"text-center p-4",children:"Tidak ada mata pelajaran tersedia."}),f.length===0&&d.length>0&&e.jsx("p",{className:"text-center p-4",children:"Tidak ada hasil ditemukan."})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-ghost",onClick:m,children:"Batal"}),e.jsx("button",{className:"btn btn-primary",onClick:r,children:"Simpan Perubahan"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{onClick:m,children:"close"})})]})},_=({isOpen:i,onClose:m,onConfirm:b,itemName:o,itemType:d,warningMessage:h})=>i?e.jsxs("dialog",{className:"modal modal-open",children:[e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Konfirmasi Penghapusan"}),e.jsxs("p",{className:"py-4",children:["Apakah Anda yakin ingin menghapus ",d," ",e.jsxs("span",{className:"font-semibold",children:['"',o,'"']}),"? ",h||"Tindakan ini tidak dapat dibatalkan."]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-ghost",onClick:m,children:"Batal"}),e.jsx("button",{className:"btn btn-error",onClick:b,children:"Ya, Hapus"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{onClick:m,children:"close"})})]}):null,Ee=()=>{const[i,m]=t.useState([]),[b,o]=t.useState([]),[d,h]=t.useState([]),[n,v]=t.useState([]),[j,A]=t.useState(null),[r,f]=t.useState(!0),[c,C]=t.useState(""),[N,O]=t.useState(!1),[s,l]=t.useState(null),[x,g]=t.useState("schedule"),[T,w]=t.useState(!1),[Y,X]=t.useState(null),[Z,R]=t.useState(!1),[ee,z]=t.useState(!1),[k,L]=t.useState(null),[B,M]=t.useState({isOpen:!1,message:""}),[$,ae]=t.useState(""),[D,se]=t.useState(""),[P,H]=t.useState("");t.useEffect(()=>{f(!0);const a=be(m),p=ve(S=>o(S.filter(y=>y.status==="aktif"))),u=U("subjects",h),I=U("classNames",S=>{v(S),!c&&S.length>0&&C(S[0].id)});return we().then(A),setTimeout(()=>f(!1),500),()=>{a(),p(),u(),I()}},[c]);const W=t.useMemo(()=>Ce.slice(0,(j==null?void 0:j.schoolDays)??6),[j]),V=t.useMemo(()=>c?i.filter(a=>a.classNameId===c):[],[i,c]),le=t.useMemo(()=>{const a=new Map;return n.forEach(p=>{p.subjects&&Object.keys(p.subjects).forEach(u=>{a.set(u,(a.get(u)||0)+1)})}),a},[n]),F=t.useMemo(()=>d.filter(a=>a.name.toLowerCase().includes($.toLowerCase())),[d,$]),G=t.useMemo(()=>n.filter(a=>a.name.toLowerCase().includes(D.toLowerCase())),[n,D]),te=()=>{if(b.length===0||d.length===0||n.length===0){M({isOpen:!0,message:"Harap tambahkan data Guru, Mata Pelajaran, dan Kelas terlebih dahulu di tab masing-masing sebelum dapat membuat jadwal."});return}l(null),O(!0)},ne=a=>{l(a),O(!0)},re=async a=>{try{s?await fe(s.id,a):await Ne(a),O(!1),l(null)}catch(p){console.error("Failed to save schedule:",p),M({isOpen:!0,message:"Gagal menyimpan jadwal. Silakan periksa kembali data yang Anda masukkan dan coba lagi."})}},ce=async a=>{if(window.confirm("Apakah Anda yakin ingin menghapus jadwal ini?"))try{await pe(a)}catch(p){console.error("Failed to delete schedule:",p),M({isOpen:!0,message:"Gagal menghapus jadwal. Mungkin jadwal ini masih terhubung dengan data lain."})}},ie=async()=>{try{await ge()}catch(a){console.error("Failed to reset schedules:",a),M({isOpen:!0,message:"Gagal mereset jadwal pelajaran."})}finally{z(!1)}},J=a=>async()=>{if(P.trim())try{await ke(a,P.trim()),H("")}catch(p){console.error("Failed to add master data:",p),M({isOpen:!0,message:"Gagal menambahkan data baru. Pastikan nama belum ada dan coba lagi."})}},q=(a,p,u)=>{let I=!1,S="";if(u==="subjects"?(I=i.some(y=>y.subjectId===a)||n.some(y=>y.subjects&&y.subjects[a]),S="Mata Pelajaran"):(I=i.some(y=>y.classNameId===a),S="Kelas"),I){alert(`Tidak dapat menghapus ${S} "${p}" karena masih digunakan dalam ${u==="subjects"?"jadwal pelajaran atau daftar mata pelajaran di sebuah kelas":"jadwal pelajaran"}.`);return}L({id:a,name:p,collection:u}),R(!0)},de=async()=>{if(k)try{await ye(k.collection,k.id)}catch(a){console.error("Failed to confirm delete:",a),M({isOpen:!0,message:"Gagal menghapus data. Pastikan data ini tidak digunakan di tempat lain."})}finally{R(!1),L(null)}},oe=a=>{X(a),w(!0)},me=async(a,p)=>{try{await Se(a,p),w(!1)}catch(u){console.error("Failed to save class subjects:",u),M({isOpen:!0,message:"Gagal menyimpan perubahan mata pelajaran untuk kelas ini. Silakan coba lagi."})}};return r?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(xe,{})}):e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manajemen Jadwal Pelajaran"}),e.jsx("p",{className:"text-base-content/70 mt-1",children:"Kelola jadwal mengajar, mata pelajaran, dan kelas."})]}),x==="schedule"&&e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{className:"btn btn-error",onClick:()=>z(!0),disabled:i.length===0,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),"Reset Jadwal"]}),e.jsxs("button",{className:"btn btn-primary",onClick:te,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Tambah Jadwal"]})]})]}),e.jsxs("div",{role:"tablist",className:"tabs tabs-lifted",children:[e.jsxs("a",{role:"tab",className:`tab ${x==="schedule"?"tab-active":""}`,onClick:()=>g("schedule"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),e.jsx("span",{className:"hidden sm:inline",children:"Lihat Jadwal"})]}),e.jsxs("a",{role:"tab",className:`tab ${x==="classes"?"tab-active":""}`,onClick:()=>g("classes"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 9a3 3 0 100-6 3 3 0 000 6zM16 11a6 6 0 016 6h-2a4 4 0 00-4-4h-1a3 3 0 01-3 3v-1a5 5 0 005-5z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Kelola Kelas"})]}),e.jsxs("a",{role:"tab",className:`tab ${x==="subjects"?"tab-active":""}`,onClick:()=>g("subjects"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 16c1.255 0 2.443-.29 3.5-.804V4.804zM14.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 0114.5 16c1.255 0 2.443-.29 3.5-.804v-10A7.968 7.968 0 0014.5 4z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Kelola Mata Pelajaran"})]})]}),e.jsx("div",{className:"card bg-base-100 shadow-xl border-t-0 rounded-t-none",children:e.jsxs("div",{className:"card-body",children:[x==="schedule"&&e.jsxs("div",{children:[e.jsxs("div",{className:"form-control w-full max-w-xs mb-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Pilih Kelas untuk Menampilkan Jadwal"})}),e.jsx("select",{className:"select select-bordered",value:c,onChange:a=>C(a.target.value),children:n.length===0?e.jsx("option",{value:"",disabled:!0,children:"Belum ada data kelas"}):n.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),c?e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-${(j==null?void 0:j.schoolDays)??6} gap-4`,children:W.map((a,p)=>e.jsxs("div",{className:"bg-base-200 p-3 rounded-box min-h-[200px]",children:[e.jsx("h3",{className:"font-bold text-xl text-center mb-4",children:a}),e.jsxs("div",{className:"space-y-3",children:[V.filter(u=>u.dayOfWeek===p+1).sort((u,I)=>u.startTime.localeCompare(I.startTime)).map(u=>e.jsx("div",{className:"card card-compact bg-base-100 shadow-md",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"card-title text-base",children:u.subjectName}),e.jsxs("p",{className:"text-sm font-mono",children:[u.startTime," - ",u.endTime]})]}),e.jsxs("div",{className:"dropdown dropdown-end",children:[e.jsx("label",{tabIndex:0,className:"btn btn-ghost btn-xs btn-circle",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),e.jsxs("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-32",children:[e.jsx("li",{children:e.jsx("a",{onClick:()=>ne(u),children:"Edit"})}),e.jsx("li",{children:e.jsx("a",{onClick:()=>ce(u.id),children:"Hapus"})})]})]})]}),e.jsx("p",{className:"text-xs opacity-60",children:u.teacherName})]})},u.id)),V.filter(u=>u.dayOfWeek===p+1).length===0&&e.jsx("div",{className:"flex items-center justify-center h-full min-h-[100px]",children:e.jsx("p",{className:"text-center text-sm text-base-content/50",children:"Tidak ada jadwal"})})]})]},a))}):e.jsxs("div",{className:"text-center p-10",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Pilih Kelas"}),e.jsx("p",{className:"text-base-content/70",children:"Silakan pilih kelas dari daftar di atas untuk melihat jadwal pelajarannya."})]})]}),x==="classes"&&e.jsxs("div",{children:[e.jsxs("div",{className:"join w-full mb-4",children:[e.jsx("input",{type:"text",placeholder:"Tambah Kelas Baru...",className:"input input-bordered join-item w-full",value:P,onChange:a=>H(a.target.value),onKeyDown:a=>a.key==="Enter"&&J("classNames")()}),e.jsx("button",{className:"btn btn-primary join-item",onClick:J("classNames"),disabled:!P.trim(),children:"Tambah"})]}),e.jsx("input",{type:"text",placeholder:"Cari nama kelas...",className:"input input-bordered w-full max-w-xs mb-4",value:D,onChange:a=>se(a.target.value)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nama Kelas"}),e.jsx("th",{children:"Jumlah Mapel"}),e.jsx("th",{className:"text-right",children:"Aksi"})]})}),e.jsxs("tbody",{children:[G.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-neutral",children:a.subjects?Object.keys(a.subjects).length:0})}),e.jsxs("td",{className:"text-right space-x-1",children:[e.jsx("button",{className:"btn btn-xs btn-outline",onClick:()=>oe(a),children:"Kelola Mapel"}),e.jsx("button",{className:"btn btn-xs btn-error",onClick:()=>q(a.id,a.name,"classNames"),children:"Hapus"})]})]},a.id)),G.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center",children:"Tidak ada data kelas ditemukan."})})]})]})})]}),x==="subjects"&&e.jsxs("div",{children:[e.jsxs("div",{className:"join w-full mb-4",children:[e.jsx("input",{type:"text",placeholder:"Tambah Mata Pelajaran Baru...",className:"input input-bordered join-item w-full",value:P,onChange:a=>H(a.target.value),onKeyDown:a=>a.key==="Enter"&&J("subjects")()}),e.jsx("button",{className:"btn btn-primary join-item",onClick:J("subjects"),disabled:!P.trim(),children:"Tambah"})]}),e.jsx("input",{type:"text",placeholder:"Cari mata pelajaran...",className:"input input-bordered w-full max-w-xs mb-4",value:$,onChange:a=>ae(a.target.value)}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nama Mata Pelajaran"}),e.jsx("th",{children:"Digunakan di Kelas"}),e.jsx("th",{className:"text-right",children:"Aksi"})]})}),e.jsxs("tbody",{children:[F.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-neutral",children:le.get(a.id)||0})}),e.jsx("td",{className:"text-right space-x-1",children:e.jsx("button",{className:"btn btn-xs btn-error",onClick:()=>q(a.id,a.name,"subjects"),children:"Hapus"})})]},a.id)),F.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center",children:"Tidak ada mata pelajaran ditemukan."})})]})]})})]})]})}),e.jsx(Te,{isOpen:N,onClose:()=>O(!1),onSave:re,teachers:b,subjects:d,classNames:n,editingSchedule:s,preselectedClassId:c,jpDurationMinutes:(j==null?void 0:j.jpDurationMinutes)||35,activeDayNames:W}),e.jsx(Ie,{isOpen:T,onClose:()=>w(!1),onSave:me,selectedClass:Y,allSubjects:d}),e.jsx(_,{isOpen:Z,onClose:()=>R(!1),onConfirm:de,itemName:(k==null?void 0:k.name)||"",itemType:(k==null?void 0:k.collection)==="subjects"?"mata pelajaran":"kelas"}),e.jsx(_,{isOpen:ee,onClose:()=>z(!1),onConfirm:ie,itemName:"SEMUA JADWAL PELAJARAN",itemType:"",warningMessage:"Tindakan ini akan menghapus seluruh data jadwal pelajaran secara permanen dan tidak dapat dibatalkan."}),e.jsx(Me,{isOpen:B.isOpen,onClose:()=>M({isOpen:!1,message:""}),message:B.message})]})};export{Ee as default};
